import{S,B as i,M as P,a as r,d as y,C as h,A as R,D as B,G as A,b as k,f as I,V as T,R as E,e as G}from"./gaussian-splats-3d.module-BPaV9HVo.js";import{c as _,a as D,b as O,B as b,d as v,P as U,G as W}from"./button_helper-DRIDeN4v.js";const n=new S,x=new I(-1.02835,1.15924,-1.29932),F=2.8,l=.3,N=3,V=new i(F,l,N),z=new P({transparent:!0,opacity:.7,depthWrite:!0}),c=new r(V,z);c.position.set(x.x+.2,1.15924,x.z);c.visible=!1;const H=new i(4,l,20),$=new y({color:new h("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),d=new r(H,$);d.visible=!1;d.position.set(-5.22835+.7,1.25924,-1.29932);const j=new i(4,l,2.9),K=new y({color:new h("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),p=new r(j,K);p.position.set(-1.22835+.7,1.25924,-4.70932);p.visible=!1;const Q=new i(7,l,6),X=new y({color:new h("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),u=new r(Q,X);u.position.set(.98531,1.25924,3.67091);u.visible=!1;n.add(new R(16777215,.4));const L=new B(16777215,.8);L.position.set(5,10,5);n.add(L);const o=new A;o.add(c);o.add(d);o.add(p);o.add(u);o.rotation.y=k.degToRad(-22);const a=_("/assets/breig/Initial_picture.webp"),g=D("/assets/breig/start_button.png");g.style.display="none";const{loaderContainer:m,loaderBar:Y}=O();let M=!1,C=!1;const q=()=>{if(M)return;M=!0,console.log("Starting scene load..."),g.style.display="none";const s=new T({threeScene:n,cameraUp:[0,-1,0],initialCameraPosition:[-.69149,-2.45657,-7.16148],initialCameraLookAt:[.02382,.63208,-1.15417],inMemoryCompressionLevel:1,renderMode:E.Continuous,sceneRevealMode:G.Gradual,splatSortDistanceMapPrecision:16,sceneFadeInRateMultiplier:20,dynamicScene:!1,sharedMemoryForWorkers:!1,showLoadingUI:!1});s.addSplatScene("/assets/breig/Breig_current.ksplat",{splatAlphaRemovalThreshold:15,progressiveLoad:!0,showLoadingUI:!1,position:[0,1,0],rotation:[0,0,0,1],scale:[1.5,1.5,1.5],onProgress:t=>{console.log(`Loading progress: ${t.toFixed(2)}%`),Y.style.width=`${Math.min(t,100)}%`,t>40&&a.style.opacity!=="0"&&(console.log("Progress > 25% → Fading out initial picture"),a.style.transition="opacity 0.4s ease",a.style.opacity="0",setTimeout(()=>{if(a.remove(),!C){C=!0;const e=document.createElement("div");e.style.display="flex",e.style.padding="4px",e.style.alignItems="center",e.style.gap="2px",e.style.position="absolute",e.style.bottom="32px",e.style.left="48%",e.style.transform="translateX(-50%)",e.style.zIndex="1000",e.style.width="180px",e.style.height="32px",e.style.backgroundColor="#EAEAEA",e.style.borderRadius="40px",e.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",document.body.appendChild(e);const f=window.matchMedia("(max-width: 768px)"),w=()=>{f.matches,e.style.left="50%"};w(),f.addEventListener("change",w),console.log("Container:",b.backgroundColor),console.log("Type of container:",typeof e),v(e,"Current",!0,b),v(e,"Future",!1,W,U.futureProjectHtmlPath)}},400)),t>=80&&(console.log("Progress = 100% → Removing loader"),c.visible=!0,d.visible=!0,p.visible=!0,u.visible=!0,n.add(o),m.style.transition="opacity 0.3s ease",m.style.opacity="0",setTimeout(()=>m.remove(),300))}}).then(()=>{s.start(),s.camera;const t=s.controls;t&&(t.minDistance=2,t.maxDistance=12,t.minPolarAngle=Math.PI/10,t.maxPolarAngle=Math.PI/2.5,t.autoRotate=!0,t.autoRotateSpeed=.2)}).catch(t=>{console.error("Error loading scene:",t)})};g.addEventListener("click",q);
