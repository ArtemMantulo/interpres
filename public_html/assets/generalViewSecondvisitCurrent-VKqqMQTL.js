import{S as x,B as s,M as v,a as n,d as h,C as u,A as M,D as C,G as L,b as P,V as R,R as S,e as A,f as B}from"./gaussian-splats-3d.module-BPaV9HVo.js";import{b as k,d as f,B as I,P as G,G as O}from"./button_helper-DRIDeN4v.js";const r=new x,g=new B(-1.02835,1.15924,-1.29932),T=2.8,i=.3,D=3,E=new s(T,i,D),U=new v({transparent:!0,opacity:.7,depthWrite:!0}),l=new n(E,U);l.position.set(g.x+.2,1.15924,g.z);l.visible=!1;const W=new s(4,i,20),_=new h({color:new u("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),c=new n(W,_);c.visible=!1;c.position.set(-5.22835+.7,1.25924,-1.29932);const F=new s(4,i,2.9),V=new h({color:new u("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),d=new n(F,V);d.position.set(-1.22835+.7,1.25924,-4.70932);d.visible=!1;const N=new s(7,i,6),z=new h({color:new u("hsl(98, 23.20%, 34.70%)"),transparent:!0,opacity:.9,depthWrite:!0}),p=new n(N,z);p.position.set(.98531,1.25924,3.67091);p.visible=!1;r.add(new M(16777215,.4));const b=new C(16777215,.8);b.position.set(5,10,5);r.add(b);const o=new L;o.add(l);o.add(c);o.add(d);o.add(p);o.rotation.y=P.degToRad(-22);const{loaderContainer:m,loaderBar:H}=k(),a=new R({threeScene:r,cameraUp:[0,-1,0],initialCameraPosition:[-.69149,-2.45657,-8.16148],initialCameraLookAt:[.02382,.63208,-1.15417],inMemoryCompressionLevel:1,renderMode:S.OnChange,sceneRevealMode:A.Gradual,splatSortDistanceMapPrecision:16,sceneFadeInRateMultiplier:20,dynamicScene:!1,sharedMemoryForWorkers:!1});a.addSplatScene("/assets/breig/Breig_current.ksplat",{splatAlphaRemovalThreshold:15,showLoadingUI:!0,progressiveLoad:!0,position:[0,1,0],rotation:[0,0,0,1],scale:[1.5,1.5,1.5],showLoadingUI:!1,onProgress:t=>{console.log(`Loading progress: ${t.toFixed(2)}%`),H.style.width=`${Math.min(t,100)}%`,t>=80&&(console.log("Progress = 100% → Removing loader"),l.visible=!0,c.visible=!0,d.visible=!0,p.visible=!0,r.add(o),m.style.transition="opacity 0.3s ease",m.style.opacity="0",setTimeout(()=>m.remove(),300))}}).then(()=>{a.start(),a.camera;const t=a.controls;t?(t.minDistance=2,t.maxDistance=12,t.minPolarAngle=Math.PI/10,t.maxPolarAngle=Math.PI/2.7):console.warn("Camera controls are not directly accessible. Check Viewer API."),t.autoRotate=!0,t.autoRotateSpeed=.2;const e=document.createElement("div");e.style.display="flex",e.style.padding="4px",e.style.alignItems="center",e.style.gap="2px",e.style.position="absolute",e.style.bottom="32px",e.style.left="48%",e.style.transform="translateX(-50%)",e.style.zIndex="1000",e.style.width="180px",e.style.height="32px",e.style.backgroundColor="#EAEAEA",e.style.borderRadius="40px",e.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",document.body.appendChild(e);const y=window.matchMedia("(max-width: 768px)"),w=()=>{y.matches,e.style.left="50%"};w(),y.addEventListener("change",w),f(e,"Current",!0,I),f(e,"Future",!1,O,G.futureProjectHtmlPath)}).catch(t=>{console.error("Ошибка при загрузке сцены:",t)});
