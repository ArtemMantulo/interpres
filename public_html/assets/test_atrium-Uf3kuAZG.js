import{S as L,G as F,B as P,C as D,M as I,a as v,b as $,c as A,d as z,A as G,D as j,V as B,R as N,e as O,f as T,g as V,h as H}from"./gaussian-splats-3d.module-BPaV9HVo.js";const u=new L,w=new T(-.02201,2.55283,.3428),x=21,M=.09,h=new F;for(let r=0;r<x;r++){const d=new P(.45,M,.45),s=r/x*360,m=new D(`hsl(${s}, 70%, 60%)`),b=new I({color:m,transparent:!0,opacity:0,depthWrite:!1,colorWrite:!1}),o=new v(d,b);o.position.set(w.x,w.y+r*M,w.z),o.userData.floorNumber=x-r,h.add(o)}h.rotation.y=$.degToRad(-22);u.add(h);const S=new v(new A(.05,16,16),new z({color:16711680}));S.position.copy(w);u.add(S);u.add(new G(16777215,.4));const W=new j(16777215,.8);W.position.set(5,10,5);u.add(W);const a=document.createElement("div");a.style.position="absolute";a.style.padding="4px 8px";a.style.background="rgba(0,0,0,0.7)";a.style.color="white";a.style.borderRadius="4px";a.style.fontSize="14px";a.style.pointerEvents="none";a.style.display="none";a.style.zIndex="1000";document.body.appendChild(a);const t=document.createElement("div");t.style.position="absolute";t.style.top="20px";t.style.right="20px";t.style.width="180px";t.style.borderRadius="12px";t.style.overflow="hidden";t.style.boxShadow="0 4px 12px rgba(0,0,0,0.25)";t.style.display="none";t.style.zIndex="1001";t.style.fontFamily="sans-serif";t.style.background="transparent";const g=document.createElement("div");g.style.height="120px";g.style.backgroundImage="url(https://images.unsplash.com/photo-1586190848861-99aa4a171e90?auto=format&fit=crop&w=400&q=80)";g.style.backgroundSize="cover";g.style.backgroundPosition="center";const c=document.createElement("div");c.style.background="rgba(0, 0, 0, 0.65)";c.style.color="white";c.style.padding="12px";c.style.fontSize="14px";c.style.lineHeight="1.4";t.appendChild(g);t.appendChild(c);document.body.appendChild(t);const f=new B({threeScene:u,cameraUp:[0,-1,0],initialCameraPosition:[.71449,2.15657,3.88348],initialCameraLookAt:[-.40116,4.23665,.21145],inMemoryCompressionLevel:1,renderMode:N.OnChange,sceneRevealMode:O.Gradual,splatSortDistanceMapPrecision:16,sceneFadeInRateMultiplier:20,dynamicScene:!1,sharedMemoryForWorkers:!1});f.addSplatScene("../assets/atrium2crop.ksplat",{splatAlphaRemovalThreshold:15,showLoadingUI:!0,progressiveLoad:!0,position:[0,1,0],rotation:[0,0,0,1],scale:[1.5,1.5,1.5]}).then(()=>{f.start();const r=f.controls;r&&(r.minDistance=1,r.maxDistance=9,r.minPolarAngle=Math.PI/20,r.maxPolarAngle=Math.PI/2.3,r.autoRotate=!0,r.autoRotateSpeed=.2);const d=new V,s=new H,m=f.camera,b=f.renderer;let o=null,e=null;function k(y){const n=b.domElement.getBoundingClientRect();s.x=(y.clientX-n.left)/n.width*2-1,s.y=-((y.clientY-n.top)/n.height)*2+1,d.setFromCamera(s,m);const p=d.intersectObjects(h.children);if(p.length>0){const l=p[0].object;o&&o!==e&&(o.material.opacity=0,o.material.colorWrite=!1,o.material.depthWrite=!1),l!==e&&(l.material.opacity=.6,l.material.colorWrite=!0,l.material.depthWrite=!0),o=l;const i=p[0].point.clone().project(m),R=(i.x*.5+.5)*n.width+n.left,E=(1-(i.y*.5+.5))*n.height+n.top;a.innerText=`${l.userData.floorNumber} floor`,a.style.left=`${R}px`,a.style.top=`${E-20}px`,a.style.display="block"}else o&&o!==e&&(o.material.opacity=0,o.material.colorWrite=!1,o.material.depthWrite=!1),o=null,a.style.display="none"}function C(y){const n=b.domElement.getBoundingClientRect();s.x=(y.clientX-n.left)/n.width*2-1,s.y=-((y.clientY-n.top)/n.height)*2+1,d.setFromCamera(s,m);const p=d.intersectObjects(h.children);if(p.length>0){const l=p[0].object;if(e===l){e.material.opacity=0,e.material.colorWrite=!1,e.material.depthWrite=!1,e=null,t.style.display="none";return}e&&(e.material.opacity=0,e.material.colorWrite=!1,e.material.depthWrite=!1),e=l,l.material.opacity=1,l.material.colorWrite=!0,l.material.depthWrite=!0;const i=l.userData.floorNumber;c.innerHTML=`
        <strong>Info for Floor ${i}</strong><br>
        • Offices: ${i*2}<br>
        • People: ${i*5}<br>
        • Elevators: ${i%3+1}
      `,t.style.display="block"}else e&&(e.material.opacity=0,e.material.colorWrite=!1,e.material.depthWrite=!1,e=null),t.style.display="none"}window.addEventListener("mousemove",k),window.addEventListener("click",C)}).catch(console.error);
