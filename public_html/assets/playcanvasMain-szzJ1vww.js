function L(){const t=document.createElement("div");t.id="application-splash-wrapper",t.innerHTML=`
        <div id="application-splash">
            <div style="color:white;font-size:36px;text-align:center;font-family:sans-serif;margin-bottom:5px;">Loading Data...</div>
            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <div id="progress-text" style="color:white;font-size:22px;text-align:center;margin-top:8px;font-family:sans-serif;">0%</div>
        </div>
    `,document.body.appendChild(t);const e=document.createElement("style");e.textContent=`
        body { background-color: #283538; }
        
        #application-splash-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #283538;
            z-index: 9999;
        }
        #application-splash {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 264px;
        }
    #progress-bar-container {
            width: 100%;
            height: 2px;
            background-color: #1d292c;
        }

        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: #f60;
            transition: width 0.2s ease-out; /* <<< Плавное заполнение */
        }
    `,document.head.appendChild(e)}function j(t){const e=document.getElementById("progress-bar"),n=document.getElementById("progress-text");if(e&&n){const o=Math.floor(t*100);e.style.width=o+"%",n.textContent=o+"%"}}function x(){const t=document.getElementById("application-splash-wrapper");t&&t.remove()}const v=document.getElementById("application-canvas"),r=new pc.Application(v,{mouse:new pc.Mouse(v),touch:new pc.TouchDevice(v)});r.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);r.setCanvasResolution(pc.RESOLUTION_AUTO);window.addEventListener("resize",()=>r.resizeCanvas());const c={galleryCsv:new pc.Asset("gallery.csv","text",{url:"/assets/playcanvasassets/data/dataGallery.csv"}),amenitiesCurrent:new pc.Asset("dataAmenitiesCurrent.csv","text",{url:"/assets/playcanvasassets/data/dataAmenitiesCurrent.csv"}),amenitiesFuture:new pc.Asset("dataAmenitiesFuture.csv","text",{url:"/assets/playcanvasassets/data/dataAmenitiesFuture.csv"}),html:new pc.Asset("asset.html","html",{url:"/assets/playcanvasassets/web/asset.html"}),css:new pc.Asset("asset.css","css",{url:"/assets/playcanvasassets/web/asset.css"}),currentPly:new pc.Asset("current.ply","gsplat",{url:"/assets/playcanvasassets/gs/Current_7april.compressed.ply"}),futurePly:new pc.Asset("future.ply","gsplat",{url:"/assets/playcanvasassets/gs/Future_7april1.compressed.ply"})},E=[new pc.Asset("orbit-camera.js","script",{url:"/assets/playcanvasassets/scripts/orbit-camera.js"}),new pc.Asset("mouse-input.js","script",{url:"/assets/playcanvasassets/scripts/mouse-input.js"}),new pc.Asset("touch-input.js","script",{url:"/assets/playcanvasassets/scripts/touch-input.js"}),new pc.Asset("modeSwitcher.js","script",{url:"/assets/playcanvasassets/scripts/modeSwitcher.js"}),new pc.Asset("gallery.js","script",{url:"/assets/playcanvasassets/scripts/gallery.js"}),new pc.Asset("adjustPixelRatio.js","script",{url:"/assets/playcanvasassets/scripts/adjustPixelRatio.js"}),new pc.Asset("uiLoader.js","script",{url:"/assets/playcanvasassets/scripts/uiLoader.js"}),new pc.Asset("amenitiesMode.js","script",{url:"/assets/playcanvasassets/scripts/amenitiesMode.js"})];E.forEach(t=>r.assets.add(t));Object.values(c).forEach(t=>r.assets.add(t));L();const y=[...Object.values(c),...E];new pc.AssetListLoader(y,r.assets);performance.now();let b=0;function S(t){if(t>=y.length){P();return}const e=y[t];r.assets.load(e),e.ready(()=>{b++,j(b/y.length),S(t+1)})}S(0);function P(){const t=new pc.Entity("Root"),e=new pc.Entity("Camera");e.setPosition(-1.792,.976,1.127),e.setEulerAngles(-24.6,-58,0),e.addComponent("camera",{clearColor:new pc.Color(1,1,1)}),e.addComponent("script"),e.script.create("orbitCamera",{attributes:{focusEntity:null,defaultDistance:5,distanceMax:7,distanceMin:3.5,zoomLerpSpeed:3,inertiaFactor:0,enablePitchLimits:!0,pitchMax:60,pitchMin:20,rotationLerpSpeed:5,autoRotate:!0,autoRotateSpeed:-5,autoRotateDelay:3,autoRender:!0,frameOnStart:!0}}),e.script.once("orbitCamera:ready",function(l){l.focusEntity=n,e.script.create("mouseInput",{orbitSensitivity:.3,distanceSensitivity:.5}),e.script.create("touchInput",{orbitSensitivity:.4,distanceSensitivity:.2})}),e.script.create("mouseInput",{orbitSensitivity:.3,distanceSensitivity:.5}),e.script.create("touchInput",{orbitSensitivity:.4,distanceSensitivity:.2}),t.addChild(e);const n=new pc.Entity("Main");n.setPosition(-.217,.204,.025),t.addChild(n);const o=new pc.Entity("html");o.addComponent("script"),o.script.create("uiLoader"),t.addChild(o);const f=new pc.Entity("ApartmentsCurrent"),A=new pc.Entity("ApartmentsFuture");t.addChild(f),t.addChild(A);const d=new pc.Entity("Current");d.enabled=!1;const m=new pc.Entity("Current_GS");m.setPosition(.323,.102,.246),m.setEulerAngles(180,-90,0),m.addComponent("gsplat",{asset:c.currentPly}),d.addChild(m);const a=new pc.Entity("AmenitiesCurrent");a.addComponent("script"),a.script.create("amenitiesMode",{attributes:{cameraEntity:e,file:c.amenitiesCurrent,offsetY:.1,focusLerpSpeed:3,lookLerpSpeed:3,targetDistance:2}}),d.addChild(a),t.addChild(d),a.addChild(s("Gym",-1.977,.363,.074)),a.addChild(s("LoungeArea",-1.518,.363,.076)),a.addChild(s("Parking",-.921,.363,-1.016)),a.addChild(s("Pool",-.325,.363,-.036)),a.addChild(s("Playground",.01,.363,.866)),a.addChild(s("Outdoor",-1.812,.363,.469)),a.addChild(s("RelaxArea",-1.731,.363,.801)),a.addChild(s("Volleyball",-1.088,.363,.863)),a.addChild(s("Walking",-.653,.363,1.122)),a.addChild(s("Fireplace",-.483,.363,.771)),a.addChild(s("Amphitheater",-1.085,.363,-.009)),a.addChild(s("WalkingRest",-.819,.363,-.31)),a.addChild(s("Bar",-.519,.363,-.66));const p=new pc.Entity("Future");p.enabled=!1;const h=new pc.Entity("Future_GS");h.setPosition(.323,.102,.246),h.setEulerAngles(180,-90,0),h.addComponent("gsplat",{asset:c.futurePly}),p.addChild(h);const i=new pc.Entity("AmenitiesFuture");i.addComponent("script"),i.script.create("amenitiesMode",{attributes:{cameraEntity:e,file:c.amenitiesFuture,offsetY:.1,focusLerpSpeed:3,lookLerpSpeed:3,targetDistance:2}}),p.addChild(i),t.addChild(p);function s(l,C,g,w){const u=new pc.Entity(l);return u.setLocalPosition(C,g,w),u}i.addChild(s("Gym",-1.977,.363,.074)),i.addChild(s("LoungeArea",-1.518,.363,.076)),i.addChild(s("Parking",-.921,.363,-1.016)),i.addChild(s("Pool",-.325,.363,-.036)),i.addChild(s("Playground",-.538,.363,.7)),i.addChild(s("Walking",-.653,.363,1.122)),i.addChild(s("Bar",-.519,.363,-.66)),t.addComponent("script"),t.script.create("modeSwitcher",{attributes:{showApartmentsButton:!1,cameraEntity:e,cameraDistances:[3.5,3.5,3.5],distanceLerpSpeed:5,amenitiesMinDistance:2,homeTarget:n,apartmentsTarget:n,amenitiesTarget:n,apartmentsUI:f,apartmentsUIFuture:A,amenitiesUI:a,amenitiesUIFuture:i,currentObjects:d,futureObjects:p}}),t.script.create("gallery",{attributes:{galleryTextAsset:c.galleryCsv}}),t.script.create("adjustPixelRatio",{attributes:{scaleDivisor:1.4}}),r.root.addChild(t),x(),r.start()}
